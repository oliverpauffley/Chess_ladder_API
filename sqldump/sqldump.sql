--
-- PostgreSQL database dump
--

-- Dumped from database version 11.5
-- Dumped by pg_dump version 11.5

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

SET default_tablespace = '';

SET default_with_oids = false;

--
-- Name: games; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.games (
    id integer NOT NULL,
    winner integer NOT NULL,
    loser integer NOT NULL,
    ladder_id integer NOT NULL,
    draw boolean,
    date date DEFAULT CURRENT_DATE NOT NULL
);


ALTER TABLE public.games OWNER TO postgres;

--
-- Name: games_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.games_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.games_id_seq OWNER TO postgres;

--
-- Name: games_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.games_id_seq OWNED BY public.games.id;


--
-- Name: ladders_users; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.ladders_users (
    id integer NOT NULL,
    user_id integer,
    ladder_id integer,
    points integer
);


ALTER TABLE public.ladders_users OWNER TO postgres;

--
-- Name: ladder_users_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.ladder_users_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.ladder_users_id_seq OWNER TO postgres;

--
-- Name: ladder_users_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.ladder_users_id_seq OWNED BY public.ladders_users.id;


--
-- Name: ladders; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.ladders (
    id integer NOT NULL,
    name character varying(255),
    owner integer,
    hashid character varying(255),
    method character varying(255)
);


ALTER TABLE public.ladders OWNER TO postgres;

--
-- Name: ladders_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.ladders_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.ladders_id_seq OWNER TO postgres;

--
-- Name: ladders_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.ladders_id_seq OWNED BY public.ladders.id;


--
-- Name: roles; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.roles (
    id integer NOT NULL,
    name character varying(255) NOT NULL
);


ALTER TABLE public.roles OWNER TO postgres;

--
-- Name: users; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.users (
    id integer NOT NULL,
    name character varying(255) NOT NULL,
    join_date date DEFAULT CURRENT_DATE NOT NULL,
    role integer DEFAULT 1 NOT NULL,
    hash character varying(255),
    email text
);


ALTER TABLE public.users OWNER TO postgres;

--
-- Name: users_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.users ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.users_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: games id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.games ALTER COLUMN id SET DEFAULT nextval('public.games_id_seq'::regclass);


--
-- Name: ladders id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ladders ALTER COLUMN id SET DEFAULT nextval('public.ladders_id_seq'::regclass);


--
-- Name: ladders_users id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ladders_users ALTER COLUMN id SET DEFAULT nextval('public.ladder_users_id_seq'::regclass);


--
-- Data for Name: games; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.games (id, winner, loser, ladder_id, draw, date) FROM stdin;
3	12	13	4	t	2019-07-13
1	12	13	4	f	2019-07-13
2	12	11	4	f	2019-07-13
4	11	12	4	f	2019-07-13
5	12	13	4	f	2019-07-14
6	13	12	4	f	2019-07-14
7	12	13	4	f	2019-07-14
8	12	13	4	f	2019-07-14
9	13	12	4	f	2019-07-14
10	13	12	4	f	2019-07-14
11	13	12	4	f	2019-07-14
12	13	12	4	f	2019-07-14
13	13	12	4	f	2019-07-14
14	12	13	4	f	2019-07-14
15	13	12	4	f	2019-07-14
16	12	13	4	f	2019-07-14
17	12	13	4	f	2019-07-14
18	13	12	4	f	2019-07-15
19	13	12	4	f	2019-07-15
20	12	13	4	f	2019-07-15
21	13	12	4	f	2019-07-15
22	12	13	4	f	2019-07-15
23	13	12	4	f	2019-07-15
24	12	13	4	f	2019-07-15
25	13	12	4	f	2019-07-15
26	12	13	4	f	2019-07-15
27	13	12	4	f	2019-07-15
28	12	13	4	f	2019-07-15
29	12	13	4	f	2019-07-15
30	13	12	4	f	2019-07-15
31	13	12	4	f	2019-07-15
32	12	13	4	f	2019-07-15
33	13	12	4	f	2019-07-16
34	13	12	4	f	2019-07-16
35	13	12	4	f	2019-07-19
36	12	13	4	f	2019-07-21
69	13	12	4	f	2019-07-26
70	13	12	4	f	2019-07-26
71	13	12	4	f	2019-07-26
72	12	13	4	f	2019-07-26
73	13	12	4	f	2019-08-07
74	13	12	4	f	2019-08-19
75	12	13	4	f	2019-08-19
76	13	12	4	f	2019-08-19
77	13	12	4	f	2019-08-19
78	13	12	4	f	2019-08-19
79	13	12	4	f	2019-08-19
80	12	13	4	f	2019-08-19
81	12	13	4	f	2019-08-19
82	13	12	4	f	2019-08-19
83	13	12	4	f	2019-08-19
84	12	13	4	f	2019-08-19
85	12	15	3	f	2019-08-19
86	14	12	5	f	2019-08-19
87	15	14	5	f	2019-08-19
88	12	15	5	f	2019-08-19
89	14	12	5	f	2019-08-19
90	14	12	5	f	2019-08-19
\.


--
-- Data for Name: ladders; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.ladders (id, name, owner, hashid, method) FROM stdin;
3	Chess Ladder	12	OlGgl	elo
4	Robot Fighting League	12	n3dzl	elo
5	Golang Meetup	12	Pz1aY	elo
\.


--
-- Data for Name: ladders_users; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.ladders_users (id, user_id, ladder_id, points) FROM stdin;
4	12	4	959
3	13	4	1041
1	12	3	1000
7	15	5	999
6	14	5	1030
5	12	5	971
\.


--
-- Data for Name: roles; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.roles (id, name) FROM stdin;
1	user
\.


--
-- Data for Name: users; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.users (id, name, join_date, role, hash, email) FROM stdin;
11	toby	2019-07-07	1	$2a$08$E3usEhmLnMlteiKkFqiBPOqRNg0wi52R9.1Xc4xOIQjCB2qNtVtyC	toby@example.com
12	ollie	2019-07-07	1	$2a$08$9W/gdymqY56jS2BSdi6csu1AxTXlVdgkw63DzNIEflFU.q98rDLlm	ollie@example.com
13	Charlotte	2019-07-07	1	$2a$08$fF/6kqAr/fXCyBckBOf7cescUeV9O5LCTzM8BNdcbM7zDZk6pzwBi	charlotte.hain@hotmail.com
14	Dan P	2019-08-19	1	$2a$08$HLUjY0l/Q7kXrjDaFIaLnOKCH5dl3InlJjrd2ZL.3dmzSZc4ZJNva	dan@email.com
15	Ben	2019-08-19	1	$2a$08$L9QfL.1VsCf0w7FUOuFXTeF33lXzZOo1xl5vf5UPVDXEOyUPbSrIq	ben@email.com
\.


--
-- Name: games_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.games_id_seq', 90, true);


--
-- Name: ladder_users_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.ladder_users_id_seq', 7, true);


--
-- Name: ladders_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.ladders_id_seq', 5, true);


--
-- Name: users_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.users_id_seq', 15, true);


--
-- Name: games games_pk; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.games
    ADD CONSTRAINT games_pk PRIMARY KEY (id);


--
-- Name: ladders_users ladder_users_pk; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ladders_users
    ADD CONSTRAINT ladder_users_pk PRIMARY KEY (id);


--
-- Name: ladders ladders_pk; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ladders
    ADD CONSTRAINT ladders_pk PRIMARY KEY (id);


--
-- Name: roles roles_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.roles
    ADD CONSTRAINT roles_pkey PRIMARY KEY (id);


--
-- Name: users users_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_pkey PRIMARY KEY (id);


--
-- Name: games_id_uindex; Type: INDEX; Schema: public; Owner: postgres
--

CREATE UNIQUE INDEX games_id_uindex ON public.games USING btree (id);


--
-- Name: ladder_users_id_uindex; Type: INDEX; Schema: public; Owner: postgres
--

CREATE UNIQUE INDEX ladder_users_id_uindex ON public.ladders_users USING btree (id);


--
-- Name: ladders_hashid_uindex; Type: INDEX; Schema: public; Owner: postgres
--

CREATE UNIQUE INDEX ladders_hashid_uindex ON public.ladders USING btree (hashid);


--
-- Name: ladders_id_uindex; Type: INDEX; Schema: public; Owner: postgres
--

CREATE UNIQUE INDEX ladders_id_uindex ON public.ladders USING btree (id);


--
-- Name: ladders_name_uindex; Type: INDEX; Schema: public; Owner: postgres
--

CREATE UNIQUE INDEX ladders_name_uindex ON public.ladders USING btree (name);


--
-- Name: users_email_uindex; Type: INDEX; Schema: public; Owner: postgres
--

CREATE UNIQUE INDEX users_email_uindex ON public.users USING btree (email);


--
-- Name: games games_ladders_id_fk; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.games
    ADD CONSTRAINT games_ladders_id_fk FOREIGN KEY (ladder_id) REFERENCES public.ladders(id);


--
-- Name: games games_users_id_fk; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.games
    ADD CONSTRAINT games_users_id_fk FOREIGN KEY (winner) REFERENCES public.users(id);


--
-- Name: games games_users_id_fk_2; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.games
    ADD CONSTRAINT games_users_id_fk_2 FOREIGN KEY (loser) REFERENCES public.users(id);


--
-- Name: ladders_users ladder_users_ladders_id_fk; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ladders_users
    ADD CONSTRAINT ladder_users_ladders_id_fk FOREIGN KEY (ladder_id) REFERENCES public.ladders(id);


--
-- Name: ladders_users ladder_users_users_id_fk; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ladders_users
    ADD CONSTRAINT ladder_users_users_id_fk FOREIGN KEY (user_id) REFERENCES public.users(id);


--
-- Name: ladders ladders_users_id_fk; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ladders
    ADD CONSTRAINT ladders_users_id_fk FOREIGN KEY (owner) REFERENCES public.users(id);


--
-- Name: users role; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT role FOREIGN KEY (role) REFERENCES public.roles(id) ON UPDATE SET DEFAULT;


--
-- PostgreSQL database dump complete
--

